{"ast":null,"code":"import _regenerator from \"/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { ref, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { getWebPages, createWebPage, updateWebPage, deleteWebPage } from '../api';\nexport default {\n  name: 'WebPages',\n  setup: function setup() {\n    var webPages = ref([]);\n    var showDialog = ref(false);\n    var editingId = ref(null);\n    var activeTab = ref('pages');\n    var form = ref({\n      name: '',\n      url: ''\n    });\n    var loadPages = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var res, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              _context.p = 0;\n              _context.n = 1;\n              return getWebPages();\n            case 1:\n              res = _context.v;\n              webPages.value = res.data;\n              _context.n = 3;\n              break;\n            case 2:\n              _context.p = 2;\n              _t = _context.v;\n              ElMessage.error('加载失败');\n            case 3:\n              return _context.a(2);\n          }\n        }, _callee, null, [[0, 2]]);\n      }));\n      return function loadPages() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var editPage = function editPage(row) {\n      editingId.value = row.id;\n      form.value = {\n        name: row.name,\n        url: row.url\n      };\n      showDialog.value = true;\n    };\n    var savePage = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var _t2;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.p = _context2.n) {\n            case 0:\n              _context2.p = 0;\n              if (!editingId.value) {\n                _context2.n = 2;\n                break;\n              }\n              _context2.n = 1;\n              return updateWebPage(editingId.value, form.value);\n            case 1:\n              ElMessage.success('更新成功');\n              _context2.n = 4;\n              break;\n            case 2:\n              _context2.n = 3;\n              return createWebPage(form.value);\n            case 3:\n              ElMessage.success('添加成功');\n            case 4:\n              showDialog.value = false;\n              editingId.value = null;\n              form.value = {\n                name: '',\n                url: ''\n              };\n              loadPages();\n              _context2.n = 6;\n              break;\n            case 5:\n              _context2.p = 5;\n              _t2 = _context2.v;\n              ElMessage.error('操作失败');\n            case 6:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[0, 5]]);\n      }));\n      return function savePage() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var deletePage = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(id) {\n        var _t3;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.p = _context3.n) {\n            case 0:\n              _context3.p = 0;\n              _context3.n = 1;\n              return deleteWebPage(id);\n            case 1:\n              ElMessage.success('删除成功');\n              loadPages();\n              _context3.n = 3;\n              break;\n            case 2:\n              _context3.p = 2;\n              _t3 = _context3.v;\n              ElMessage.error('删除失败');\n            case 3:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[0, 2]]);\n      }));\n      return function deletePage(_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    onMounted(function () {\n      loadPages();\n    });\n    return {\n      webPages: webPages,\n      showDialog: showDialog,\n      editingId: editingId,\n      activeTab: activeTab,\n      form: form,\n      editPage: editPage,\n      savePage: savePage,\n      deletePage: deletePage\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","getWebPages","createWebPage","updateWebPage","deleteWebPage","name","setup","webPages","showDialog","editingId","activeTab","form","url","loadPages","_ref","_asyncToGenerator","_regenerator","m","_callee","res","_t","w","_context","p","n","v","value","data","error","a","apply","arguments","editPage","row","id","savePage","_ref2","_callee2","_t2","_context2","success","deletePage","_ref3","_callee3","_t3","_context3","_x"],"sources":["/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/src/views/WebPages.vue"],"sourcesContent":["<template>\n  <div>\n    <el-tabs v-model=\"activeTab\">\n      <el-tab-pane label=\"网页列表管理\" name=\"pages\">\n        <el-button type=\"primary\" @click=\"showDialog = true\" style=\"margin-bottom: 20px\">添加网页</el-button>\n        <el-table :data=\"webPages\" border>\n          <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n          <el-table-column prop=\"name\" label=\"名称\" />\n          <el-table-column prop=\"url\" label=\"URL\" />\n          <el-table-column label=\"操作\" width=\"180\">\n            <template #default=\"scope\">\n              <el-button size=\"small\" @click=\"editPage(scope.row)\">编辑</el-button>\n              <el-button size=\"small\" type=\"danger\" @click=\"deletePage(scope.row.id)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-tab-pane>\n    </el-tabs>\n\n    <el-dialog v-model=\"showDialog\" :title=\"editingId ? '编辑网页' : '添加网页'\" width=\"500px\">\n      <el-form :model=\"form\" label-width=\"80px\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"form.name\" />\n        </el-form-item>\n        <el-form-item label=\"URL\">\n          <el-input v-model=\"form.url\" />\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showDialog = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"savePage\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { getWebPages, createWebPage, updateWebPage, deleteWebPage } from '../api'\n\nexport default {\n  name: 'WebPages',\n  setup() {\n    const webPages = ref([])\n    const showDialog = ref(false)\n    const editingId = ref(null)\n    const activeTab = ref('pages')\n    const form = ref({ name: '', url: '' })\n\n    const loadPages = async () => {\n      try {\n        const res = await getWebPages()\n        webPages.value = res.data\n      } catch (error) {\n        ElMessage.error('加载失败')\n      }\n    }\n\n    const editPage = (row) => {\n      editingId.value = row.id\n      form.value = { name: row.name, url: row.url }\n      showDialog.value = true\n    }\n\n    const savePage = async () => {\n      try {\n        if (editingId.value) {\n          await updateWebPage(editingId.value, form.value)\n          ElMessage.success('更新成功')\n        } else {\n          await createWebPage(form.value)\n          ElMessage.success('添加成功')\n        }\n        showDialog.value = false\n        editingId.value = null\n        form.value = { name: '', url: '' }\n        loadPages()\n      } catch (error) {\n        ElMessage.error('操作失败')\n      }\n    }\n\n    const deletePage = async (id) => {\n      try {\n        await deleteWebPage(id)\n        ElMessage.success('删除成功')\n        loadPages()\n      } catch (error) {\n        ElMessage.error('删除失败')\n      }\n    }\n\n    onMounted(() => {\n      loadPages()\n    })\n\n    return {\n      webPages,\n      showDialog,\n      editingId,\n      activeTab,\n      form,\n      editPage,\n      savePage,\n      deletePage\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
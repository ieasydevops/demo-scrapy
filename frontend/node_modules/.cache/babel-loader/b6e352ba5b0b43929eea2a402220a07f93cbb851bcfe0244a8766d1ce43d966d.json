{"ast":null,"code":"import _regenerator from \"/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ref, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { getAnnouncements } from '../api';\nexport default {\n  name: 'Announcements',\n  setup: function setup() {\n    var announcements = ref([]);\n    var loading = ref(false);\n    var searchKeyword = ref('');\n    var sortOrder = ref('desc');\n    var currentPage = ref(1);\n    var pageSize = ref(20);\n    var total = ref(0);\n    var loadAnnouncements = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var res, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              loading.value = true;\n              _context.p = 1;\n              _context.n = 2;\n              return getAnnouncements({\n                keyword: searchKeyword.value,\n                order: sortOrder.value,\n                page: currentPage.value,\n                pageSize: pageSize.value\n              });\n            case 2:\n              res = _context.v;\n              announcements.value = res.data.data || [];\n              total.value = res.data.total || 0;\n              _context.n = 4;\n              break;\n            case 3:\n              _context.p = 3;\n              _t = _context.v;\n              console.error('加载失败:', _t);\n              ElMessage.error('加载失败');\n            case 4:\n              _context.p = 4;\n              loading.value = false;\n              return _context.f(4);\n            case 5:\n              return _context.a(2);\n          }\n        }, _callee, null, [[1, 3, 4, 5]]);\n      }));\n      return function loadAnnouncements() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var handleSearch = function handleSearch() {\n      currentPage.value = 1;\n      loadAnnouncements();\n    };\n    var handleSizeChange = function handleSizeChange() {\n      currentPage.value = 1;\n      loadAnnouncements();\n    };\n    var handlePageChange = function handlePageChange() {\n      loadAnnouncements();\n    };\n    onMounted(function () {\n      loadAnnouncements();\n    });\n    return {\n      announcements: announcements,\n      loading: loading,\n      searchKeyword: searchKeyword,\n      sortOrder: sortOrder,\n      currentPage: currentPage,\n      pageSize: pageSize,\n      total: total,\n      loadAnnouncements: loadAnnouncements,\n      handleSearch: handleSearch,\n      handleSizeChange: handleSizeChange,\n      handlePageChange: handlePageChange\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","getAnnouncements","name","setup","announcements","loading","searchKeyword","sortOrder","currentPage","pageSize","total","loadAnnouncements","_ref","_asyncToGenerator","_regenerator","m","_callee","res","_t","w","_context","p","n","value","keyword","order","page","v","data","console","error","f","a","apply","arguments","handleSearch","handleSizeChange","handlePageChange"],"sources":["/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/src/views/Announcements.vue"],"sourcesContent":["<template>\n  <div>\n    <el-card>\n      <template #header>\n        <div style=\"display: flex; justify-content: space-between; align-items: center\">\n          <span>采购信息动态</span>\n          <div style=\"display: flex; gap: 10px\">\n            <el-input\n              v-model=\"searchKeyword\"\n              placeholder=\"搜索标题或内容\"\n              style=\"width: 300px\"\n              clearable\n              @clear=\"handleSearch\"\n              @keyup.enter=\"handleSearch\"\n            />\n            <el-button @click=\"handleSearch\">搜索</el-button>\n            <el-select v-model=\"sortOrder\" @change=\"loadAnnouncements\" style=\"width: 120px\">\n              <el-option label=\"最新优先\" value=\"desc\" />\n              <el-option label=\"最早优先\" value=\"asc\" />\n            </el-select>\n          </div>\n        </div>\n      </template>\n\n      <el-table :data=\"announcements\" border v-loading=\"loading\" style=\"width: 100%\">\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n        <el-table-column prop=\"title\" label=\"标题\" min-width=\"300\">\n          <template #default=\"scope\">\n            <a :href=\"scope.row.url\" target=\"_blank\" style=\"color: #409eff; text-decoration: none\">\n              {{ scope.row.title }}\n            </a>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"web_page_name\" label=\"来源\" width=\"150\" />\n        <el-table-column prop=\"publish_date\" label=\"发布时间\" width=\"120\" />\n        <el-table-column prop=\"created_at\" label=\"同步时间\" width=\"180\" />\n      </el-table>\n\n      <div style=\"margin-top: 20px; display: flex; justify-content: center\">\n        <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :total=\"total\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handlePageChange\"\n        />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { getAnnouncements } from '../api'\n\nexport default {\n  name: 'Announcements',\n  setup() {\n    const announcements = ref([])\n    const loading = ref(false)\n    const searchKeyword = ref('')\n    const sortOrder = ref('desc')\n    const currentPage = ref(1)\n    const pageSize = ref(20)\n    const total = ref(0)\n\n    const loadAnnouncements = async () => {\n      loading.value = true\n      try {\n        const res = await getAnnouncements({\n          keyword: searchKeyword.value,\n          order: sortOrder.value,\n          page: currentPage.value,\n          pageSize: pageSize.value\n        })\n        announcements.value = res.data.data || []\n        total.value = res.data.total || 0\n      } catch (error) {\n        console.error('加载失败:', error)\n        ElMessage.error('加载失败')\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const handleSearch = () => {\n      currentPage.value = 1\n      loadAnnouncements()\n    }\n\n    const handleSizeChange = () => {\n      currentPage.value = 1\n      loadAnnouncements()\n    }\n\n    const handlePageChange = () => {\n      loadAnnouncements()\n    }\n\n    onMounted(() => {\n      loadAnnouncements()\n    })\n\n    return {\n      announcements,\n      loading,\n      searchKeyword,\n      sortOrder,\n      currentPage,\n      pageSize,\n      total,\n      loadAnnouncements,\n      handleSearch,\n      handleSizeChange,\n      handlePageChange\n    }\n  }\n}\n</script>\n"],"mappings":";;AAsDA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAI;AACnC,SAASC,SAAQ,QAAS,cAAa;AACvC,SAASC,gBAAe,QAAS,QAAO;AAExC,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,KAAK,WAALA,KAAKA,CAAA,EAAG;IACN,IAAMC,aAAY,GAAIN,GAAG,CAAC,EAAE;IAC5B,IAAMO,OAAM,GAAIP,GAAG,CAAC,KAAK;IACzB,IAAMQ,aAAY,GAAIR,GAAG,CAAC,EAAE;IAC5B,IAAMS,SAAQ,GAAIT,GAAG,CAAC,MAAM;IAC5B,IAAMU,WAAU,GAAIV,GAAG,CAAC,CAAC;IACzB,IAAMW,QAAO,GAAIX,GAAG,CAAC,EAAE;IACvB,IAAMY,KAAI,GAAIZ,GAAG,CAAC,CAAC;IAEnB,IAAMa,iBAAgB;MAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,YAAA,GAAAC,CAAA,CAAI,SAAAC,QAAA;QAAA,IAAAC,GAAA,EAAAC,EAAA;QAAA,OAAAJ,YAAA,GAAAK,CAAA,WAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,CAAA,GAAAD,QAAA,CAAAE,CAAA;YAAA;cACxBjB,OAAO,CAACkB,KAAI,GAAI,IAAG;cAAAH,QAAA,CAAAC,CAAA;cAAAD,QAAA,CAAAE,CAAA;cAAA,OAECrB,gBAAgB,CAAC;gBACjCuB,OAAO,EAAElB,aAAa,CAACiB,KAAK;gBAC5BE,KAAK,EAAElB,SAAS,CAACgB,KAAK;gBACtBG,IAAI,EAAElB,WAAW,CAACe,KAAK;gBACvBd,QAAQ,EAAEA,QAAQ,CAACc;cACrB,CAAC;YAAA;cALKN,GAAE,GAAAG,QAAA,CAAAO,CAAA;cAMRvB,aAAa,CAACmB,KAAI,GAAIN,GAAG,CAACW,IAAI,CAACA,IAAG,IAAK,EAAC;cACxClB,KAAK,CAACa,KAAI,GAAIN,GAAG,CAACW,IAAI,CAAClB,KAAI,IAAK;cAAAU,QAAA,CAAAE,CAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,CAAA;cAAAH,EAAA,GAAAE,QAAA,CAAAO,CAAA;cAEhCE,OAAO,CAACC,KAAK,CAAC,OAAO,EAAAZ,EAAO;cAC5BlB,SAAS,CAAC8B,KAAK,CAAC,MAAM;YAAA;cAAAV,QAAA,CAAAC,CAAA;cAEtBhB,OAAO,CAACkB,KAAI,GAAI,KAAI;cAAA,OAAAH,QAAA,CAAAW,CAAA;YAAA;cAAA,OAAAX,QAAA,CAAAY,CAAA;UAAA;QAAA,GAAAhB,OAAA;MAAA,CAExB;MAAA,gBAjBML,iBAAgBA,CAAA;QAAA,OAAAC,IAAA,CAAAqB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAiBtB;IAEA,IAAMC,YAAW,GAAI,SAAfA,YAAWA,CAAA,EAAU;MACzB3B,WAAW,CAACe,KAAI,GAAI;MACpBZ,iBAAiB,CAAC;IACpB;IAEA,IAAMyB,gBAAe,GAAI,SAAnBA,gBAAeA,CAAA,EAAU;MAC7B5B,WAAW,CAACe,KAAI,GAAI;MACpBZ,iBAAiB,CAAC;IACpB;IAEA,IAAM0B,gBAAe,GAAI,SAAnBA,gBAAeA,CAAA,EAAU;MAC7B1B,iBAAiB,CAAC;IACpB;IAEAZ,SAAS,CAAC,YAAM;MACdY,iBAAiB,CAAC;IACpB,CAAC;IAED,OAAO;MACLP,aAAa,EAAbA,aAAa;MACbC,OAAO,EAAPA,OAAO;MACPC,aAAa,EAAbA,aAAa;MACbC,SAAS,EAATA,SAAS;MACTC,WAAW,EAAXA,WAAW;MACXC,QAAQ,EAARA,QAAQ;MACRC,KAAK,EAALA,KAAK;MACLC,iBAAiB,EAAjBA,iBAAiB;MACjBwB,YAAY,EAAZA,YAAY;MACZC,gBAAgB,EAAhBA,gBAAgB;MAChBC,gBAAe,EAAfA;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regenerator from \"/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ref, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { getAnnouncements } from '../api';\nexport default {\n  name: 'Announcements',\n  setup: function setup() {\n    var announcements = ref([]);\n    var loading = ref(false);\n    var searchKeyword = ref('');\n    var sortOrder = ref('desc');\n    var currentPage = ref(1);\n    var pageSize = ref(20);\n    var total = ref(0);\n    var detailVisible = ref(false);\n    var currentDetail = ref(null);\n    var getSummary = function getSummary(text) {\n      if (!text) return '-';\n      var maxLength = 100;\n      if (text.length <= maxLength) return text;\n      return text.substring(0, maxLength) + '...';\n    };\n    var showDetail = function showDetail(row) {\n      currentDetail.value = row;\n      detailVisible.value = true;\n    };\n    var loadAnnouncements = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var res, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              loading.value = true;\n              _context.p = 1;\n              _context.n = 2;\n              return getAnnouncements({\n                keyword: searchKeyword.value,\n                order: sortOrder.value,\n                page: currentPage.value,\n                pageSize: pageSize.value\n              });\n            case 2:\n              res = _context.v;\n              announcements.value = res.data.data || [];\n              total.value = res.data.total || 0;\n              _context.n = 4;\n              break;\n            case 3:\n              _context.p = 3;\n              _t = _context.v;\n              console.error('Âä†ËΩΩÂ§±Ë¥•:', _t);\n              ElMessage.error('Âä†ËΩΩÂ§±Ë¥•');\n            case 4:\n              _context.p = 4;\n              loading.value = false;\n              return _context.f(4);\n            case 5:\n              return _context.a(2);\n          }\n        }, _callee, null, [[1, 3, 4, 5]]);\n      }));\n      return function loadAnnouncements() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var handleSearch = function handleSearch() {\n      currentPage.value = 1;\n      loadAnnouncements();\n    };\n    var handleSizeChange = function handleSizeChange() {\n      currentPage.value = 1;\n      loadAnnouncements();\n    };\n    var handlePageChange = function handlePageChange() {\n      loadAnnouncements();\n    };\n    onMounted(function () {\n      loadAnnouncements();\n    });\n    return {\n      announcements: announcements,\n      loading: loading,\n      searchKeyword: searchKeyword,\n      sortOrder: sortOrder,\n      currentPage: currentPage,\n      pageSize: pageSize,\n      total: total,\n      detailVisible: detailVisible,\n      currentDetail: currentDetail,\n      getSummary: getSummary,\n      showDetail: showDetail,\n      loadAnnouncements: loadAnnouncements,\n      handleSearch: handleSearch,\n      handleSizeChange: handleSizeChange,\n      handlePageChange: handlePageChange\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","getAnnouncements","name","setup","announcements","loading","searchKeyword","sortOrder","currentPage","pageSize","total","detailVisible","currentDetail","getSummary","text","maxLength","length","substring","showDetail","row","value","loadAnnouncements","_ref","_asyncToGenerator","_regenerator","m","_callee","res","_t","w","_context","p","n","keyword","order","page","v","data","console","error","f","a","apply","arguments","handleSearch","handleSizeChange","handlePageChange"],"sources":["/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/src/views/Announcements.vue"],"sourcesContent":["<template>\n  <div>\n    <el-card>\n      <template #header>\n        <div style=\"display: flex; justify-content: space-between; align-items: center\">\n          <span>ÈááË¥≠‰ø°ÊÅØÂä®ÊÄÅ</span>\n          <div style=\"display: flex; gap: 10px\">\n            <el-input\n              v-model=\"searchKeyword\"\n              placeholder=\"ÊêúÁ¥¢Ê†áÈ¢òÊàñÂÜÖÂÆπ\"\n              style=\"width: 300px\"\n              clearable\n              @clear=\"handleSearch\"\n              @keyup.enter=\"handleSearch\"\n            />\n            <el-button @click=\"handleSearch\">ÊêúÁ¥¢</el-button>\n            <el-select v-model=\"sortOrder\" @change=\"loadAnnouncements\" style=\"width: 120px\">\n              <el-option label=\"ÊúÄÊñ∞‰ºòÂÖà\" value=\"desc\" />\n              <el-option label=\"ÊúÄÊó©‰ºòÂÖà\" value=\"asc\" />\n            </el-select>\n          </div>\n        </div>\n      </template>\n\n      <el-table :data=\"announcements\" border v-loading=\"loading\" style=\"width: 100%\">\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n        <el-table-column prop=\"title\" label=\"Ê†áÈ¢ò\" min-width=\"250\">\n          <template #default=\"scope\">\n            <a :href=\"scope.row.url\" target=\"_blank\" style=\"color: #409eff; text-decoration: none\">\n              {{ scope.row.title }}\n            </a>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"ÂÜÖÂÆπÊëòË¶Å\" min-width=\"200\">\n          <template #default=\"scope\">\n            <div style=\"max-height: 60px; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;\">\n              {{ getSummary(scope.row.content || scope.row.title) }}\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"web_page_name\" label=\"Êù•Ê∫ê\" width=\"120\" />\n        <el-table-column prop=\"publish_date\" label=\"ÂèëÂ∏ÉÊó∂Èó¥\" width=\"120\" />\n        <el-table-column prop=\"created_at\" label=\"ÂêåÊ≠•Êó∂Èó¥\" width=\"180\" />\n        <el-table-column label=\"Êìç‰Ωú\" width=\"120\" fixed=\"right\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" type=\"primary\" link @click=\"showDetail(scope.row)\">Êü•ÁúãËØ¶ÊÉÖ</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-dialog v-model=\"detailVisible\" title=\"ÂÖ¨ÂëäËØ¶ÊÉÖ\" width=\"800px\">\n        <div v-if=\"currentDetail\">\n          <el-descriptions :column=\"2\" border>\n            <el-descriptions-item label=\"Ê†áÈ¢ò\" :span=\"2\">\n              <a :href=\"currentDetail.url\" target=\"_blank\" style=\"color: #409eff; text-decoration: none\">\n                {{ currentDetail.title }}\n              </a>\n            </el-descriptions-item>\n            <el-descriptions-item label=\"Êù•Ê∫ê\">{{ currentDetail.web_page_name || '-' }}</el-descriptions-item>\n            <el-descriptions-item label=\"ÂèëÂ∏ÉÊó∂Èó¥\">{{ currentDetail.publish_date }}</el-descriptions-item>\n            <el-descriptions-item label=\"ÂêåÊ≠•Êó∂Èó¥\" :span=\"2\">{{ currentDetail.created_at }}</el-descriptions-item>\n          </el-descriptions>\n\n          <el-divider>ÂÜÖÂÆπÊÄªÁªì</el-divider>\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 8px; margin-bottom: 20px; color: white\">\n            <div style=\"font-size: 16px; font-weight: bold; margin-bottom: 15px\">\n              üìã ÂÖ≥ÈîÆ‰ø°ÊÅØÊëòË¶Å\n            </div>\n            <div style=\"background: rgba(255, 255, 255, 0.95); padding: 15px; border-radius: 6px; color: #303133; line-height: 1.8\">\n              <div style=\"margin-bottom: 12px\">\n                <div style=\"color: #909399; font-size: 12px; margin-bottom: 4px\">Ê†áÈ¢ò</div>\n                <div style=\"font-weight: 500\">{{ currentDetail.title }}</div>\n              </div>\n              <div v-if=\"currentDetail.content && currentDetail.content.trim()\" style=\"margin-bottom: 12px\">\n                <div style=\"color: #909399; font-size: 12px; margin-bottom: 4px\">ÂÜÖÂÆπ</div>\n                <div>{{ currentDetail.content }}</div>\n              </div>\n              <div style=\"display: flex; gap: 20px; margin-top: 15px; padding-top: 15px; border-top: 1px solid #e4e7ed\">\n                <div>\n                  <div style=\"color: #909399; font-size: 12px; margin-bottom: 4px\">Êù•Ê∫ê</div>\n                  <div style=\"font-weight: 500\">{{ currentDetail.web_page_name || 'Êú™Áü•' }}</div>\n                </div>\n                <div>\n                  <div style=\"color: #909399; font-size: 12px; margin-bottom: 4px\">ÂèëÂ∏ÉÊó∂Èó¥</div>\n                  <div style=\"font-weight: 500\">{{ currentDetail.publish_date }}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <el-divider>ÂÆåÊï¥‰ø°ÊÅØ</el-divider>\n          <div style=\"line-height: 1.8; color: #606266\">\n            <p><strong>Ê†áÈ¢òÔºö</strong>{{ currentDetail.title }}</p>\n            <p><strong>ÈìæÊé•Ôºö</strong><a :href=\"currentDetail.url\" target=\"_blank\" style=\"color: #409eff\">{{ currentDetail.url }}</a></p>\n            <p><strong>ÂèëÂ∏ÉÊó∂Èó¥Ôºö</strong>{{ currentDetail.publish_date }}</p>\n            <p><strong>ÂêåÊ≠•Êó∂Èó¥Ôºö</strong>{{ currentDetail.created_at }}</p>\n            <p v-if=\"currentDetail.content && currentDetail.content.trim()\"><strong>ÂÜÖÂÆπÔºö</strong>{{ currentDetail.content }}</p>\n          </div>\n        </div>\n      </el-dialog>\n\n      <div style=\"margin-top: 20px; display: flex; justify-content: center\">\n        <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :total=\"total\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handlePageChange\"\n        />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { getAnnouncements } from '../api'\n\nexport default {\n  name: 'Announcements',\n  setup() {\n    const announcements = ref([])\n    const loading = ref(false)\n    const searchKeyword = ref('')\n    const sortOrder = ref('desc')\n    const currentPage = ref(1)\n    const pageSize = ref(20)\n    const total = ref(0)\n    const detailVisible = ref(false)\n    const currentDetail = ref(null)\n\n    const getSummary = (text) => {\n      if (!text) return '-'\n      const maxLength = 100\n      if (text.length <= maxLength) return text\n      return text.substring(0, maxLength) + '...'\n    }\n\n    const showDetail = (row) => {\n      currentDetail.value = row\n      detailVisible.value = true\n    }\n\n    const loadAnnouncements = async () => {\n      loading.value = true\n      try {\n        const res = await getAnnouncements({\n          keyword: searchKeyword.value,\n          order: sortOrder.value,\n          page: currentPage.value,\n          pageSize: pageSize.value\n        })\n        announcements.value = res.data.data || []\n        total.value = res.data.total || 0\n      } catch (error) {\n        console.error('Âä†ËΩΩÂ§±Ë¥•:', error)\n        ElMessage.error('Âä†ËΩΩÂ§±Ë¥•')\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const handleSearch = () => {\n      currentPage.value = 1\n      loadAnnouncements()\n    }\n\n    const handleSizeChange = () => {\n      currentPage.value = 1\n      loadAnnouncements()\n    }\n\n    const handlePageChange = () => {\n      loadAnnouncements()\n    }\n\n    onMounted(() => {\n      loadAnnouncements()\n    })\n\n    return {\n      announcements,\n      loading,\n      searchKeyword,\n      sortOrder,\n      currentPage,\n      pageSize,\n      total,\n      detailVisible,\n      currentDetail,\n      getSummary,\n      showDetail,\n      loadAnnouncements,\n      handleSearch,\n      handleSizeChange,\n      handlePageChange\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regenerator from \"/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport { ref, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { getPushConfig, updatePushConfig } from '../api';\nexport default {\n  name: 'PushConfig',\n  setup: function setup() {\n    var config = ref({\n      email: '',\n      push_time: ''\n    });\n    var hour = ref(17);\n    var activeTab = ref('config');\n    var loadConfig = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var res, _error$response, message, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              _context.p = 0;\n              _context.n = 1;\n              return getPushConfig();\n            case 1:\n              res = _context.v;\n              config.value = res.data;\n              if (res.data.push_time) {\n                hour.value = parseInt(res.data.push_time);\n              }\n              _context.n = 3;\n              break;\n            case 2:\n              _context.p = 2;\n              _t = _context.v;\n              console.error('加载失败:', _t);\n              message = ((_error$response = _t.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || _t.message || '加载失败';\n              ElMessage.error(message);\n            case 3:\n              return _context.a(2);\n          }\n        }, _callee, null, [[0, 2]]);\n      }));\n      return function loadConfig() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var saveConfig = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var _error$response2, message, _t2;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.p = _context2.n) {\n            case 0:\n              if (config.value.email) {\n                _context2.n = 1;\n                break;\n              }\n              ElMessage.warning('请输入邮箱地址');\n              return _context2.a(2);\n            case 1:\n              _context2.p = 1;\n              _context2.n = 2;\n              return updatePushConfig({\n                email: config.value.email,\n                push_time: hour.value.toString()\n              });\n            case 2:\n              ElMessage.success('保存成功');\n              _context2.n = 4;\n              break;\n            case 3:\n              _context2.p = 3;\n              _t2 = _context2.v;\n              console.error('保存失败:', _t2);\n              message = ((_error$response2 = _t2.response) === null || _error$response2 === void 0 || (_error$response2 = _error$response2.data) === null || _error$response2 === void 0 ? void 0 : _error$response2.error) || _t2.message || '保存失败';\n              ElMessage.error(message);\n            case 4:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[1, 3]]);\n      }));\n      return function saveConfig() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    onMounted(function () {\n      loadConfig();\n    });\n    return {\n      config: config,\n      hour: hour,\n      activeTab: activeTab,\n      saveConfig: saveConfig\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","getPushConfig","updatePushConfig","name","setup","config","email","push_time","hour","activeTab","loadConfig","_ref","_asyncToGenerator","_regenerator","m","_callee","res","_error$response","message","_t","w","_context","p","n","v","value","data","parseInt","console","error","response","a","apply","arguments","saveConfig","_ref2","_callee2","_error$response2","_t2","_context2","warning","toString","success"],"sources":["/Users/blackwood/work/src/github.com/ieasydevops/demo/frontend/src/views/PushConfig.vue"],"sourcesContent":["<template>\n  <div>\n    <el-tabs v-model=\"activeTab\">\n      <el-tab-pane label=\"推送配置\" name=\"config\">\n        <el-form :model=\"config\" label-width=\"120px\" style=\"max-width: 500px\">\n          <el-form-item label=\"邮箱地址\">\n            <el-input v-model=\"config.email\" />\n          </el-form-item>\n          <el-form-item label=\"推送时间\">\n            <el-input-number v-model=\"hour\" :min=\"0\" :max=\"23\" />\n            <span style=\"margin-left: 10px\">点（24小时制）</span>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"saveConfig\">保存配置</el-button>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { getPushConfig, updatePushConfig } from '../api'\n\nexport default {\n  name: 'PushConfig',\n  setup() {\n    const config = ref({ email: '', push_time: '' })\n    const hour = ref(17)\n    const activeTab = ref('config')\n\n    const loadConfig = async () => {\n      try {\n        const res = await getPushConfig()\n        config.value = res.data\n        if (res.data.push_time) {\n          hour.value = parseInt(res.data.push_time)\n        }\n      } catch (error) {\n        console.error('加载失败:', error)\n        const message = error.response?.data?.error || error.message || '加载失败'\n        ElMessage.error(message)\n      }\n    }\n\n    const saveConfig = async () => {\n      if (!config.value.email) {\n        ElMessage.warning('请输入邮箱地址')\n        return\n      }\n      try {\n        await updatePushConfig({ email: config.value.email, push_time: hour.value.toString() })\n        ElMessage.success('保存成功')\n      } catch (error) {\n        console.error('保存失败:', error)\n        const message = error.response?.data?.error || error.message || '保存失败'\n        ElMessage.error(message)\n      }\n    }\n\n    onMounted(() => {\n      loadConfig()\n    })\n\n    return {\n      config,\n      hour,\n      activeTab,\n      saveConfig\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}